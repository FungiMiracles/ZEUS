<!doctype html>
<html lang="pl">
<head>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
  
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
        crossorigin="anonymous" />

  <title>{% block title %}{% endblock %}</title>

  <!-- LINK DO ZEWNÄ˜TRZNEGO CSS ZE STYLAMI -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/zeus.css') }}">

  <!-- KALENDARZ ENTENDY + GLOBALNE TÅO ZEUSA -->
<style>
/* ============================
   RESPONSYWNOÅšÄ† â€“ ZEUS MOBILE
   ============================ */

/* --- TELEFONY --- */
@media (max-width: 767.98px) {

  /* Logo ZEUSA */
  .navbar-brand img {
    width: 70px !important;
    height: 70px !important;
  }

  /* Zegar Entendy â€“ nie absolutny */
  .entenda-clock {
    position: static;
    margin: 10px auto 5px auto;
    font-size: 18px;
    display: inline-block;
  }

  /* GÃ³rny navbar â€“ kolumnowy */
  .navbar {
    flex-wrap: wrap;
    justify-content: center;
    text-align: center;
  }

  /* Rola uÅ¼ytkownika */
  .navbar > div {
    width: 100%;
    margin-top: 5px;
    font-size: 0.8em;
  }

  /* Dolna nawigacja â€“ lista pionowa */
  #navbarNavLower .navbar-nav {
    flex-direction: column;
    align-items: stretch;
  }

  #navbarNavLower .nav-link {
    padding: 10px 0;
    font-size: 1.05em;
  }

  /* Statystyki Å›wiata â€“ mniejsze linie */
  .entenda-stats-bar {
    font-size: 12px;
    line-height: 1.4;
  }

  /* GÅ‚Ã³wna treÅ›Ä‡ â€“ peÅ‚na szerokoÅ›Ä‡ */
  main.container {
    max-width: 100%;
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* --- TABLETY --- */
@media (min-width: 768px) and (max-width: 1024px) {

  .navbar-brand img {
    width: 90px;
    height: 90px;
  }

  .entenda-clock {
    font-size: 22px;
    top: 20px;
    right: 15px;
  }

  #navbarNavLower .nav-link {
    padding: 6px 8px;
    font-size: 0.95em;
  }

  main.container {
    max-width: 95%;
  }
}
</style>
</head>


<body>


  
  <!-- Loader -->
  <div id="loader">
    <div class="spinner"></div>
  </div>

  <!-- GÃ³rny pasek nawigacji -->
  <nav class="navbar navbar-expand-md navbar-light bg-white" style="position:relative;">
    <a class="navbar-brand" href="{{ url_for('home_page') }}">
      <img src="{{ url_for('static', filename='ZEUS_oficjalne_logo_tlo.jpg') }}"
           alt="ZEUS LOGO" width="110" height="110" />
    </a>

      {% if session.rola %}
        <div style="font-size:0.85em; opacity:0.85;">
            Rola: <strong>{{ session.rola|capitalize }}</strong>
            |
            <a href="{{ url_for('wejscie') }}" style="color:#4f3a3a;">ZmieÅ„</a>
        </div>
      {% endif %}


    <!-- KALENDARZ ENTENDY -->
    <div class="entenda-clock">
      <span class="ent-month">{{ ENTENDA_MONTH }}</span>
      <span class="ent-dot">.</span>
      <span class="ent-year">{{ ENTENDA_YEAR }}</span>
      <span class="ent-ce"> CE</span>
    </div>

    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- przyszÅ‚e gÃ³rne linki -->
    </div>
  </nav>

  <hr class="my-1" />

  <!-- WSKAÅ¹NIK ÅšWIATA ENTENDY -->
  <div class="entenda-stats-bar">
    Entenda to
    <strong>{{ E_WORLD_POP }}</strong> ludzi,
    na <strong>{{ E_WORLD_CONTINENTS }}</strong> kontynentach,
    w <strong>{{ E_WORLD_COUNTRIES }}</strong> krajach,
    w <strong>{{ E_WORLD_REGIONS }}</strong> regionach
    i <strong>{{ E_WORLD_CITIES }}</strong> miastach.
  </div>

  <!-- Dolny pasek nawigacji -->
  <nav class="navbar navbar-expand-md navbar-light bg-white" style="height: 40px">
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarNavLower"
      aria-controls="navbarNavLower"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-center" id="navbarNavLower">
      <ul class="navbar-nav">
        {% set nav_links = [
        ('home_page', 'Strona gÅ‚Ã³wna'),
        ('mapy', 'Mapy'),
        ('historia', 'Historia'),
        ('kultura', 'Kultura'),
        ('sily_zbrojne', 'SiÅ‚y zbrojne'),
        ('gospodarka', 'Gospodarka'),
        ('demografia', 'Demografia'),
        ('natura', 'Natura'),
        ('dyplomacja', 'Dyplomacja'),
        ('artykuly', 'ArtykuÅ‚y'),
        ('pliki', 'Pliki'),
        ('info', 'Info')
        ] %}

        {% for endpoint, label in nav_links %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for(endpoint) }}">{{ label }}</a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </nav>

  <hr class="my-1" />

  <main class="container">
    {% block content %}{% endblock %}
  </main>


  <!-- Optional JavaScript -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
          integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
          crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
          crossorigin="anonymous"></script>


  <!-- ============================
       LOADER FIX (BFCache + normal)
       ============================ -->
      <script>
    window.addEventListener("beforeunload", function (e) {
        // ðŸ”’ jeÅ›li klikniÄ™to link do pobierania â€“ NIE pokazuj loadera
        if (document.activeElement &&
            document.activeElement.hasAttribute("data-download")) {
            return;
        }

        document.getElementById("loader").style.display = "flex";
    });
    </script>
  <div id="zeus-toast" style="display:none;">
      <span id="zeus-toast-text"></span>
  </div>
  <script>
function zeusToast(message, duration = 5000) {
    const toast = document.getElementById("zeus-toast");
    const text = document.getElementById("zeus-toast-text");

    if (!toast || !text) return;

    text.textContent = message;
    toast.style.display = "block";

    requestAnimationFrame(() => {
        toast.style.opacity = "1";
    });

    setTimeout(() => {
        toast.style.opacity = "0";
        setTimeout(() => {
            toast.style.display = "none";
        }, 300);
    }, duration);
}
</script>


</body>
</html>
